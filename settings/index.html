<!doctype html>
<html>
<head>
    <title>Lights</title>
    <link rel="stylesheet" type="text/css" href="styles.css" />
    <link rel="stylesheet" type="text/css" href="rangeslider.css" />

    <script type="text/javascript" src="/homey.js" data-origin="settings"></script>
    <script type="text/javascript" src="/manager/webserver/assets/js/jquery.js"></script>

    <!--<script type="text/javascript" src="test-devices.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"
            integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
            crossorigin="anonymous"></script>-->

    <script type="text/javascript" src="vue.min.js" data-origin="settings"></script>
    <script type="text/javascript" src="settings.js" data-origin="settings"></script>
    <script type="text/javascript" src="rangeslider.js" data-origin="settings"></script>
</head>
<body>
    <div id="app">
        <p data-i18n="settings.benefit" class="benefit">Manage your lights</p>

        <div class="rTable tabs" style="display:none">
            <div class="rTableRow">
                <div id="tabb1" class="tab tab-inactive" onclick="showTab(1)" data-i18n="tab1.title">Devices</div>
                <div id="tabb2" class="tab tab-inactive" onclick="showTab(2)" data-i18n="tab2.title">Log</div>
            </div>
        </div>
        <div class="tab-content">
            <div style="height:8px" class="panel"></div>
            <div id="tab1" class="panel">
                <div class="loader" v-if="loading">
                    <svg version="1.1" id="loader-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="40px" height="40px" viewBox="0 0 40 40" enable-background="new 0 0 40 40" xml:space="preserve">
                        <path opacity="0.2" fill="#000" d="M20.201,5.169c-8.254,0-14.946,6.692-14.946,14.946c0,8.255,6.692,14.946,14.946,14.946 s14.946-6.691,14.946-14.946C35.146,11.861,28.455,5.169,20.201,5.169z M20.201,31.749c-6.425,0-11.634-5.208-11.634-11.634 c0-6.425,5.209-11.634,11.634-11.634c6.425,0,11.633,5.209,11.633,11.634C31.834,26.541,26.626,31.749,20.201,31.749z" />
                        <path fill="#000" d="M26.013,10.047l1.654-2.866c-2.198-1.272-4.743-2.012-7.466-2.012h0v3.312h0 C22.32,8.481,24.301,9.057,26.013,10.047z">
                            <animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 20 20" to="360 20 20" dur="0.5s" repeatCount="indefinite" />
                        </path>
                    </svg>
                </div>
                <div id="devices-list" style="display: none;">

                    <div class="zone" v-for="zone in zonesList">
                        <div class="rTableRow zone-header text-header">
                            <span class="rTableCell">{{zone.name}}</span>
                            <span class="rTableCell zone-slider slider stretch" v-if="true || hasBrightness(zone)">
                                <!--<input v-bind:id="'dim_'+zone.id"
                                       type="range"
                                       v-bind:min="0"
                                       v-bind:max="100"
                                       v-bind:step="1"
                                       v-bind:data-id="zone.id" />-->
                            </span>
                            <div class="rTableCell zone-switch settings-item-last">
                                <label class="form-switch">
                                    <input v-bind:id="'zone-switch_'+zone.id"
                                           type="checkbox"
                                           @click="switchZone(zone, $event.target.checked)">
                                    <i></i>
                                </label>
                            </div>
                        </div>
                        
                        <div class="rTableRow devices" v-for="device in getDevicesForZone(zone.id)">
                            <div class="rTableCell line">
                                <div class="icon-cell" v-html="getIcon(device)"></div>
                            </div>
                            <div class="rTableCell line scrollable-text stretch">
                                <b>{{device.name}}</b>
                                <div class="slider" v-if="hasBrightness(device)">
                                    <input v-bind:id="'dim_'+device.id"
                                           type="range"
                                           v-bind:min="0"
                                           v-bind:max="100"
                                           v-bind:step="1"
                                           v-bind:data-id="device.id" />
                                </div>
                            </div>
                            <div class="rTableCell line settings-item-last" v-bind:class="{ dim: hasBrightness(device) }">
                                <label class="form-switch">
                                    <input v-bind:id="'switch_'+device.id"
                                           type="checkbox"
                                           @click="switchLight(device, $event.target.checked)">
                                    <i></i>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!--<div class="rTableRow devices" v-for="device in devices">
                        <div class="rTableCell line">
                            <div class="icon-cell" v-html="getIcon(device)"></div>
                        </div>
                        <div class="rTableCell line scrollable-text">
                            {{ getZone(device) }}<br />
                            <b>{{device.name}}</b>
                            <div class="slider" v-if="hasBrightness(device)">
                                <input v-bind:id="'dim_'+device.id"
                                       type="range"
                                       v-bind:min="0"
                                       v-bind:max="100"
                                       v-bind:step="1"
                                       v-bind:data-id="device.id"/>
                            </div>
                        </div>
                        <div class="rTableCell line settings-item-last" v-bind:class="{ dim: hasBrightness(device) }">
                            <label class="form-switch">
                                <input v-bind:id="'switch_'+device.id"
                                       type="checkbox"
                                       @click="switchLight(device, $event.target.checked)">
                                <i></i>
                            </label>
                        </div>
                    </div>-->
                </div>
            </div>
            <div id="tab2" class="panel" style="display: none;">
                Log...
            </div>
        </div>
    </div>
</body>
</html>